"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[60602],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>k});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,k=m["".concat(s,".").concat(c)]||m[c]||u[c]||i;return a?n.createElement(k,l(l({ref:t},d),{},{components:a})):n.createElement(k,l({ref:t},d))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},92053:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={id:"data-provider",title:"Data Provider",sidebar_label:"Data Provider"},l=void 0,o={unversionedId:"api-references/providers/data-provider",id:"version-2.xx.xx/api-references/providers/data-provider",title:"Data Provider",description:"Overview",source:"@site/versioned_docs/version-2.xx.xx/api-references/providers/data-provider.md",sourceDirName:"api-references/providers",slug:"/api-references/providers/data-provider",permalink:"/docs/2.xx.xx/api-references/providers/data-provider",draft:!1,editUrl:"https://github.com/refinedev/refine/tree/master/documentation/versioned_docs/version-2.xx.xx/api-references/providers/data-provider.md",tags:[],version:"2.xx.xx",lastUpdatedBy:"Daniel Monettelli",lastUpdatedAt:1671163008,formattedLastUpdatedAt:"Dec 16, 2022",frontMatter:{id:"data-provider",title:"Data Provider",sidebar_label:"Data Provider"},sidebar:"version-2.xx.xx/someSidebar",previous:{title:"Auth Provider",permalink:"/docs/2.xx.xx/api-references/providers/auth-provider"},next:{title:"Live Provider",permalink:"/docs/2.xx.xx/api-references/providers/live-provider"}},s={},p=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Creating a data provider",id:"creating-a-data-provider",level:2},{value:"<code>create</code>",id:"create",level:3},{value:"Parameter Types",id:"parameter-types",level:4},{value:"<code>createMany</code>",id:"createmany",level:3},{value:"Parameter Types",id:"parameter-types-1",level:4},{value:"<code>deleteOne</code>",id:"deleteone",level:3},{value:"Parameter Types",id:"parameter-types-2",level:4},{value:"<code>deleteMany</code>",id:"deletemany",level:3},{value:"Parameter Types",id:"parameter-types-3",level:4},{value:"<code>update</code>",id:"update",level:3},{value:"Parameter Types",id:"parameter-types-4",level:4},{value:"<code>updateMany</code>",id:"updatemany",level:3},{value:"Parameter Types",id:"parameter-types-5",level:4},{value:"<code>getOne</code>",id:"getone",level:3},{value:"Parameter Types",id:"parameter-types-6",level:4},{value:"<code>getMany</code>",id:"getmany",level:3},{value:"Parameter Types",id:"parameter-types-7",level:4},{value:"<code>getList</code>",id:"getlist",level:3},{value:"Parameter Types",id:"parameter-types-8",level:4},{value:"<code>custom</code>",id:"custom",level:3},{value:"Parameter Types",id:"parameter-types-9",level:4},{value:"Error Format",id:"error-format",level:3}],d={toc:p};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"A data provider is the place where a refine app communicates with an API.",(0,r.kt)("br",{parentName:"p"}),"\n","Data providers also act as adapters for refine making it possible to consume different API's and data services conveniently.",(0,r.kt)("br",{parentName:"p"}),"\n","A data provider makes ",(0,r.kt)("strong",{parentName:"p"},"HTTP")," requests and returns response data back using predefined methods."),(0,r.kt)("p",null,"A data provider must include following methods:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},'const dataProvider = {\n    create: ({ resource, variables, metaData }) => Promise,\n    createMany: ({ resource, variables, metaData }) => Promise,\n    deleteOne: ({ resource, id, metaData }) => Promise,\n    deleteMany: ({ resource, ids, metaData }) => Promise,\n    getList: ({ resource, pagination, sort, filters, metaData }) => Promise,\n    getMany: ({ resource, ids, metaData }) => Promise,\n    getOne: ({ resource, id, metaData }) => Promise,\n    update: ({ resource, id, variables, metaData }) => Promise,\n    updateMany: ({ resource, ids, variables, metaData }) => Promise,\n    custom: ({\n        url,\n        method,\n        sort,\n        filters,\n        payload,\n        query,\n        headers,\n        metaData,\n    }) => Promise,\n    getApiUrl: () => "",\n};\n')),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"refine")," includes many out-of-the-box data providers to use in your projects like"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/simple-rest"},"Simple REST API")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/graphql"},"GraphQL")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/nestjsx-crud"},"NestJS CRUD")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/airtable"},"Airtable")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/strapi"},"Strapi")," - ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/strapi-v4"},"Strapi v4")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/strapi-graphql"},"Strapi GraphQL")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/supabase"},"Supabase")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/hasura"},"Hasura")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/appwrite"},"Appwrite")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/refinedev/refine/tree/master/packages/altogic"},"Altogic"))),(0,r.kt)("h3",{parentName:"admonition",id:"community-\ufe0f"},"Community \u2764\ufe0f"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/rturan29/refine-firebase"},"Firebase")," by ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/rturan29"},"rturan29")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/tspvivek/refine-directus"},"Directus")," by ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/tspvivek"},"tspvivek")))),(0,r.kt)("br",null),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"refine")," consumes this methods using ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useCreate"},"data hooks"),"."),(0,r.kt)("p",{parentName:"admonition"},"Data hooks are used to operate CRUD actions like creating a new record, listing a resource or deleting a record etc..")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Data hooks uses ",(0,r.kt)("a",{parentName:"p",href:"https://react-query.tanstack.com/"},"React Query")," to manage data fetching. React Query handles important concerns like caching, invalidation, loading states etc..")),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("div",null,(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/guides-and-concepts/providers/data-provider/flow.png"})),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"To activate data provider in refine, we have to pass the ",(0,r.kt)("inlineCode",{parentName:"p"},"dataProvider")," to the ",(0,r.kt)("inlineCode",{parentName:"p"},"<Refine />")," component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="App.tsx"',title:'"App.tsx"'},'import { Refine } from "@pankod/refine";\n\nimport dataProvider from "./dataProvider";\n\nconst App: React.FC = () => {\n    return <Refine dataProvider={dataProvider} />;\n};\n')),(0,r.kt)("h2",{id:"creating-a-data-provider"},"Creating a data provider"),(0,r.kt)("p",null,"We will build ",(0,r.kt)("strong",{parentName:"p"},'"Simple REST Dataprovider"')," of ",(0,r.kt)("inlineCode",{parentName:"p"},"@pankod/refine-simple-rest")," from scratch to show the logic of how data provider methods interact with the API."),(0,r.kt)("p",null,"We will provide you a fully working, ",(0,r.kt)("em",{parentName:"p"},"fake REST API")," located at ",(0,r.kt)("a",{parentName:"p",href:"https://api.fake-rest.refine.dev."},"https://api.fake-rest.refine.dev.")," You may take a look at available ",(0,r.kt)("a",{parentName:"p",href:"https://api.fake-rest.refine.dev"},"resources and routes of the API")," before proceeding to the next step.",(0,r.kt)("br",{parentName:"p"}),"\n","Our ",(0,r.kt)("strong",{parentName:"p"},'"Simple REST Dataprovider"')," will be consuming this ",(0,r.kt)("em",{parentName:"p"},"fake REST API"),"."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Fake REST API is based on ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/typicode/json-server"},"JSON Server Project"),". ",(0,r.kt)("strong",{parentName:"p"},"Simple REST Dataprovider")," is fully compatible with the REST rules and methods of the ",(0,r.kt)("strong",{parentName:"p"},"JSON Server"),".")),(0,r.kt)("br",null),(0,r.kt)("p",null,"Let's build a method that returns our data provider:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},'import axios, { AxiosInstance } from "axios";\nimport { DataProvider } from "./interfaces/dataProvider.ts";\n\nconst axiosInstance = axios.create();\n\nconst SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    create: ({ resource, variables, metaData }) => Promise,\n    createMany: ({ resource, variables, metaData }) => Promise,\n    deleteOne: ({ resource, id, metaData }) => Promise,\n    deleteMany: ({ resource, ids, metaData }) => Promise,\n    getList: ({ resource, pagination, sort, filters, metaData }) => Promise,\n    getMany: ({ resource, ids, metaData }) => Promise,\n    getOne: ({ resource, id, metaData }) => Promise,\n    update: ({ resource, id, variables, metaData }) => Promise,\n    updateMany: ({ resource, ids, variables, metaData }) => Promise,\n    custom: ({\n        url,\n        method,\n        sort,\n        filters,\n        payload,\n        query,\n        headers,\n        metaData,\n    }) => Promise,\n    getApiUrl: () => "",\n});\n')),(0,r.kt)("p",null,"It will take the API URL as a parameter and an optional ",(0,r.kt)("strong",{parentName:"p"},"HTTP")," client. We will use ",(0,r.kt)("strong",{parentName:"p"},"axios")," as the default ",(0,r.kt)("strong",{parentName:"p"},"HTTP")," client."),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"create"},(0,r.kt)("inlineCode",{parentName:"h3"},"create")),(0,r.kt)("p",null,"This method allows us to create a single item in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    create: async ({ resource, variables }) => {\n        const url = `${apiUrl}/${resource}`;\n\n        const { data } = await httpClient.post(url, variables);\n\n        return {\n            data,\n        };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"variables"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"TVariables")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"TVariables")," is a user defined type which can be passed to ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useCreate#type-parameters"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreate"))," to type ",(0,r.kt)("inlineCode",{parentName:"p"},"variables"))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"create")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useCreate")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useCreate } from "@pankod/refine";\n\nconst { mutate } = useCreate();\n\nmutate({\n    resource: "categories",\n    values: {\n        title: "New Category",\n    },\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useCreate"},"Refer to the useCreate documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"createmany"},(0,r.kt)("inlineCode",{parentName:"h3"},"createMany")),(0,r.kt)("p",null,"This method allows us to create multiple items in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    createMany: async ({ resource, variables }) => {\n        const response = await Promise.all(\n            variables.map(async (param) => {\n                const { data } = await httpClient.post(\n                    `${apiUrl}/${resource}`,\n                    param,\n                );\n                return data;\n            }),\n        );\n\n        return { data: response };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types-1"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"variables"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"TVariables[]")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"TVariables")," is a user defined type which can be passed to ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useCreateMany"},(0,r.kt)("inlineCode",{parentName:"a"},"useCreateMany"))," to type ",(0,r.kt)("inlineCode",{parentName:"p"},"variables"))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"createMany")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useCreateMany")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useCreateMany } from "@pankod/refine";\n\nconst { mutate } = useCreateMany();\n\nmutate({\n    resource: "categories",\n    values: [\n        {\n            title: "New Category",\n        },\n        {\n            title: "Another New Category",\n        },\n    ],\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useCreateMany"},"Refer to the useCreateMany documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"deleteone"},(0,r.kt)("inlineCode",{parentName:"h3"},"deleteOne")),(0,r.kt)("p",null,"This method allows us to delete an item in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    deleteOne: async ({ resource, id }) => {\n        const url = `${apiUrl}/${resource}/${id}`;\n\n        const { data } = await httpClient.delete(url);\n\n        return {\n            data,\n        };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types-2"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"id"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"deleteOne")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useDelete")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useDelete } from "@pankod/refine";\n\nconst { mutate } = useDelete();\n\nmutate({ resource: "categories", id: "2" });\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useDelete"},"Refer to the useDelete documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"deletemany"},(0,r.kt)("inlineCode",{parentName:"h3"},"deleteMany")),(0,r.kt)("p",null,"This method allows us to delete multiple items in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    deleteMany: async ({ resource, ids }) => {\n        const response = await Promise.all(\n            ids.map(async (id) => {\n                const { data } = await httpClient.delete(\n                    `${apiUrl}/${resource}/${id}`,\n                );\n                return data;\n            }),\n        );\n        return { data: response };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types-3"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ids"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string[]")),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"deleteMany")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useDeleteMany")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useDeleteMany } from "@pankod/refine";\n\nconst { mutate } = useDeleteMany();\n\nmutate({\n    resource: "categories",\n    ids: ["2", "3"],\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useDeleteMany"},"Refer to the useDeleteMany documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"update"},(0,r.kt)("inlineCode",{parentName:"h3"},"update")),(0,r.kt)("p",null,"This method allows us to update an item in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    update: async ({ resource, id, variables }) => {\n        const url = `${apiUrl}/${resource}/${id}`;\n\n        const { data } = await httpClient.patch(url, variables);\n\n        return {\n            data,\n        };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types-4"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"id"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"variables"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"TVariables")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"TVariables")," is a user defined type which can be passed to ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useUpdate#type-parameters"},(0,r.kt)("inlineCode",{parentName:"a"},"useUpdate"))," to type ",(0,r.kt)("inlineCode",{parentName:"p"},"variables"))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"update")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useUpdate")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useUpdate } from "@pankod/refine";\n\nconst { mutate } = useUpdate();\n\nmutate({\n    resource: "categories",\n    id: "2",\n    values: { title: "New Category Title" },\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useUpdate"},"Refer to the useUpdate documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"updatemany"},(0,r.kt)("inlineCode",{parentName:"h3"},"updateMany")),(0,r.kt)("p",null,"This method allows us to update multiple items in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    updateMany: async ({ resource, ids, variables }) => {\n        const response = await Promise.all(\n            ids.map(async (id) => {\n                const { data } = await httpClient.patch(\n                    `${apiUrl}/${resource}/${id}`,\n                    variables,\n                );\n                return data;\n            }),\n        );\n\n        return { data: response };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types-5"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ids"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string[]")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"variables"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"TVariables")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"TVariables is a user defined type which can be passed to ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useUpdateMany#type-parameters"},(0,r.kt)("inlineCode",{parentName:"a"},"useUpdateMany"))," to type ",(0,r.kt)("inlineCode",{parentName:"p"},"variables"))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"updateMany")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useUpdateMany")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useUpdateMany } from "@pankod/refine";\n\nconst { mutate } = useUpdateMany();\n\nmutate({\n    resource: "posts",\n    ids: ["1", "2"],\n    values: { status: "draft" },\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useUpdateMany"},"Refer to the useUpdateMany documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"getone"},(0,r.kt)("inlineCode",{parentName:"h3"},"getOne")),(0,r.kt)("p",null,"This method allows us to retrieve a single item in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    getOne: async ({ resource, id }) => {\n        const url = `${apiUrl}/${resource}/${id}`;\n\n        const { data } = await httpClient.get(url);\n\n        return {\n            data,\n        };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types-6"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"id"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"getOne")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useOne")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useOne } from "@pankod/refine";\n\nconst { data } = useOne<ICategory>({ resource: "categories", id: "1" });\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useOne"},"Refer to the useOne documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"getmany"},(0,r.kt)("inlineCode",{parentName:"h3"},"getMany")),(0,r.kt)("p",null,"This method allows us to retrieve multiple items in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    ...\n// highlight-start\n    getMany: async ({ resource, ids }) => {\n        const { data } = await httpClient.get(\n            `${apiUrl}/${resource}?${stringify({ id: ids })}`,\n        );\n\n        return {\n            data,\n        };\n    },\n// highlight-end\n    ...\n})\n")),(0,r.kt)("h4",{id:"parameter-types-7"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ids"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string[]")),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"getMany")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useMany")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useMany } from "@pankod/refine";\n\nconst { data } = useMany({ resource: "categories", ids: ["1", "2"] });\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useMany"},"Refer to the useMany documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"getlist"},(0,r.kt)("inlineCode",{parentName:"h3"},"getList")),(0,r.kt)("p",null,"This method allows us to retrieve a collection of items in a resource."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},'const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n// highlight-start\n    getList: async ({ resource, pagination, filters, sort }) => {\n        const url = `${apiUrl}/${resource}`;\n\n        const { data, headers } = await httpClient.get(\n            `${url}`,\n        );\n\n        const total = +headers["x-total-count"];\n\n        return {\n            data,\n            total,\n        };\n    },\n// highlight-end\n}\n')),(0,r.kt)("h4",{id:"parameter-types-8"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"resource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pagination?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/2.xx.xx/api-references/interfaceReferences#pagination"},(0,r.kt)("inlineCode",{parentName:"a"},"Pagination")),";")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sort?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/2.xx.xx/api-references/interfaceReferences#crudsorting"},(0,r.kt)("inlineCode",{parentName:"a"},"CrudSorting")),";")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"filters?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/2.xx.xx/api-references/interfaceReferences#crudfilters"},(0,r.kt)("inlineCode",{parentName:"a"},"CrudFilters")),";")))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"getList")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useList")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useList } from "@pankod/refine";\n\nconst { data } = useList({ resource: "posts" });\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useList"},"Refer to the useList documentation for more information. ","\u2192"))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Adding pagination")),(0,r.kt)("p",null,"We will send start and end parameters to list a certain size of items."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},'// highlight-next-line\nimport { stringify } from "query-string";\n\nconst SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    getList: async ({ resource, pagination, filters, sort }) => {\n        const url = `${apiUrl}/${resource}`;\n\n// highlight-start\n        const current = pagination?.current || 1;\n        const pageSize = pagination?.pageSize || 10;\n// highlight-end\n\n// highlight-start\n        const query = {\n            _start: (current - 1) * pageSize,\n            _end: current * pageSize,\n        };\n// highlight-end\n\n        const { data, headers } = await httpClient.get(\n// highlight-next-line\n            `${url}?${stringify(query)}`,\n        );\n\n        const total = +headers["x-total-count"];\n\n        return {\n            data,\n            total,\n        };\n    },\n')),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useList } from "@pankod/refine";\n\nconst { data } = useList({\n    resource: "posts",\n    config: {\n// highlight-next-line\n        pagination: { current: 1, pageSize: 10 },\n    },\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Listing will start from page 1 showing 10 records.")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Adding sorting")),(0,r.kt)("p",null,"We'll sort records by speficified order and field."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/interfaceReferences#crudoperators"},"CrudSorting")," ?")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},'// highlight-start\nconst generateSort = (sort?: CrudSorting) => {\n    let _sort = ["id"]; // default sorting field\n    let _order = ["desc"]; // default sorting\n\n    if (sort) {\n        _sort = [];\n        _order = [];\n\n        sort.map((item) => {\n            _sort.push(item.field);\n            _order.push(item.order);\n        });\n    }\n\n    return {\n        _sort,\n        _order,\n    };\n};\n// highlight-end\n\nconst SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    getList: async ({ resource, pagination, filters, sort }) => {\n        const url = `${apiUrl}/${resource}`;\n\n        const current = pagination?.current || 1;\n        const pageSize = pagination?.pageSize || 10;\n\n// highlight-next-line\n        const { _sort, _order } = generateSort(sort);\n\n// highlight-start\n        const query = {\n            _start: (current - 1) * pageSize,\n            _end: current * pageSize,\n            _sort: _sort.join(","),\n            _order: _order.join(","),\n        };\n// highlight-end\n\n        const { data, headers } = await httpClient.get(\n// highlight-next-line\n            `${url}?${stringify(query)}`,\n        );\n\n        const total = +headers["x-total-count"];\n\n        return {\n            data,\n            total,\n        };\n    },\n}\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,"Since our API accepts only certain parameter formats like ",(0,r.kt)("inlineCode",{parentName:"p"},"_sort")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"_order")," we may need to transform some of the parameters."),(0,r.kt)("p",null,"So we added the ",(0,r.kt)("inlineCode",{parentName:"p"},"generateSort")," method to transform sort parameters."),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useList } from "@pankod/refine";\n\nconst { data } = useList({\n    resource: "posts",\n    config: {\n        pagination: { current: 1, pageSize: 10 },\n// highlight-next-line\n        sort: [{ order: "asc", field: "title" }],\n    },\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Listing starts from ascending alphabetical order on title field.")),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Adding filtering")),(0,r.kt)("p",null,"Filters allow you to filter queries using ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/interfaceReferences#crudoperators"},"refine's filter operators"),". It is configured via field, operator and value properites."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},'const generateSort = (sort?: CrudSorting) => {\n    let _sort = ["id"]; // default sorting field\n    let _order = ["desc"]; // default sorting\n\n    if (sort) {\n        _sort = [];\n        _order = [];\n\n        sort.map((item) => {\n            _sort.push(item.field);\n            _order.push(item.order);\n        });\n    }\n\n    return {\n        _sort,\n        _order,\n    };\n};\n\n// highlight-start\nconst mapOperator = (operator: CrudOperators): string => {\n    switch (operator) {\n        case "ne":\n        case "gte":\n        case "lte":\n            return `_${operator}`;\n        case "contains":\n            return "_like";\n    }\n\n    return ""; // default "eq"\n};\n\nconst generateFilter = (filters?: CrudFilters) => {\n    const queryFilters: { [key: string]: string } = {};\n    if (filters) {\n        filters.map(({ field, operator, value }) => {\n            const mappedOperator = mapOperator(operator);\n            queryFilters[`${field}${mappedOperator}`] = value;\n        });\n    }\n\n    return queryFilters;\n};\n// highlight-end\n\nconst SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n    getList: async ({ resource, pagination, filters, sort }) => {\n        const url = `${apiUrl}/${resource}`;\n\n        const current = pagination?.current || 1;\n        const pageSize = pagination?.pageSize || 10;\n\n        const { _sort, _order } = generateSort(sort);\n\n// highlight-next-line\n        const queryFilters = generateFilter(filters);\n\n        const query = {\n            _start: (current - 1) * pageSize,\n            _end: current * pageSize,\n            _sort: _sort.join(","),\n            _order: _order.join(","),\n        };\n\n        const { data, headers } = await httpClient.get(\n// highlight-next-line\n            `${url}?${stringify(query)}&${stringify(queryFilters)}`,\n        );\n\n        const total = +headers["x-total-count"];\n\n        return {\n            data,\n            total,\n        };\n    },\n}\n')),(0,r.kt)("br",null),(0,r.kt)("p",null,"Since our API accepts only certain parameter formats to filter the data, we may need to transform some parameters."),(0,r.kt)("p",null,"So we added the ",(0,r.kt)("inlineCode",{parentName:"p"},"generateFilter")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"mapOperator")," methods to the transform filter parameters."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/interfaceReferences#crudoperators"},"Refer to the list of all filter operators ","\u2192")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useList } from "@pankod/refine";\n\nconst { data } = useList({\n    resource: "posts",\n    config: {\n// highlight-start\n        pagination: { current: 1, pageSize: 10 },\n        sort: [{ order: "asc", field: "title" }],\n        filters: [\n            {\n                field: "status",\n                operator: "eq",\n                value: "rejected",\n            },\n        ],\n    },\n// highlight-end\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'Only lists records whose status equals to "rejected".')),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"custom"},(0,r.kt)("inlineCode",{parentName:"h3"},"custom")),(0,r.kt)("p",null,"An optional method named ",(0,r.kt)("inlineCode",{parentName:"p"},"custom")," can be added to handle requests with custom parameters like URL, CRUD methods and configurations.",(0,r.kt)("br",{parentName:"p"}),"\n","It's useful if you have non-stantard REST API endpoints or want to make a connection with external resources."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},'const SimpleRestDataProvider = (\n    apiUrl: string,\n    httpClient: AxiosInstance = axiosInstance,\n): DataProvider => ({\n custom: async ({ url, method, filters, sort, payload, query, headers }) => {\n        let requestUrl = `${url}?`;\n\n        if (sort) {\n            const { _sort, _order } = generateSort(sort);\n            const sortQuery = {\n                _sort: _sort.join(","),\n                _order: _order.join(","),\n            };\n            requestUrl = `${requestUrl}&${stringify(sortQuery)}`;\n        }\n\n        if (filters) {\n            const filterQuery = generateFilter(filters);\n            requestUrl = `${requestUrl}&${stringify(filterQuery)}`;\n        }\n\n        if (query) {\n            requestUrl = `${requestUrl}&${stringify(query)}`;\n        }\n\n        if (headers) {\n            httpClient.defaults.headers = {\n                ...httpClient.defaults.headers,\n                ...headers,\n            };\n        }\n\n        let axiosResponse;\n        switch (method) {\n            case "put":\n            case "post":\n            case "patch":\n                axiosResponse = await httpClient[method](url, payload);\n                break;\n            case "delete":\n                axiosResponse = await httpClient.delete(url, {\n                    data: payload,\n                });\n                break;\n            default:\n                axiosResponse = await httpClient.get(requestUrl);\n                break;\n        }\n\n        const { data } = axiosResponse;\n\n        return Promise.resolve({ data });\n    },\n }\n')),(0,r.kt)("h4",{id:"parameter-types-9"},"Parameter Types"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"url"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"string"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"method"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"get"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"delete"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"head"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"options"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"post"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"put"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"patch"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sort?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/2.xx.xx/api-references/interfaceReferences#crudsorting"},(0,r.kt)("inlineCode",{parentName:"a"},"CrudSorting")),";")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"filters?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/docs/2.xx.xx/api-references/interfaceReferences#crudfilters"},(0,r.kt)("inlineCode",{parentName:"a"},"CrudFilters")),";")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"payload?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"query?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"headers?"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"{}"))))),(0,r.kt)("br",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," will consume this ",(0,r.kt)("inlineCode",{parentName:"p"},"custom")," method using the ",(0,r.kt)("inlineCode",{parentName:"p"},"useCustom")," data hook."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import { useCustom } from "@pankod/refine";\n\nconst { data, isLoading } = useCustom({\n    url: `${apiURL}/posts-unique-check`,\n    method: "get",\n    config: {\n        query: {\n            title: "Foo bar",\n        },\n    },\n});\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/hooks/data/useCustom"},"Refer to the useCustom documentation for more information. ","\u2192"))),(0,r.kt)("h3",{id:"error-format"},"Error Format"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," expects errors to be extended from ",(0,r.kt)("a",{parentName:"p",href:"/docs/2.xx.xx/api-references/interfaceReferences#httperror"},(0,r.kt)("inlineCode",{parentName:"a"},"HttpError")),".",(0,r.kt)("br",{parentName:"p"}),"\n","Axios interceptor can be used to transform the error from response before Axios returns the response to your code. Interceptors are methods which are triggered before the main method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="dataProvider.ts"',title:'"dataProvider.ts"'},"...\naxiosInstance.interceptors.response.use(\n    (response) => {\n        return response;\n    },\n    (error) => {\n        const customError: HttpError = {\n            ...error,\n            message: error.response?.data?.message,\n            statusCode: error.response?.status,\n        };\n\n        return Promise.reject(customError);\n    },\n);\n...\n")))}m.isMDXComponent=!0}}]);